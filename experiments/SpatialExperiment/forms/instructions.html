
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="/lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <style>
      p {
      font-size: 18px;
      }

      li {
      font-size: 18px;
      }
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
2A	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>
      
      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<h2><center>Don't explode!</center></h2>

	<p>
	  You will play a cooperative communication game with a partner.
	  Read these instructions carefully to learn how to play! 
	</p>

	<p>
	  The game takes place on a 4 x 4 board, which both of you can see at all times.
	  At the beginning of each round, some tiles on the board may have green checkmarks.
	  These tiles are <i>safe</i>.
	</p>

	<p>
	  <center>
	    <img src="images/grid.png" alt="Example objects"
		 style="width:300px; height:300px">
	  </center>
	</p>

	<p>
	  Some of the other tiles are also safe.
	  But beneath others there are bombs!
	  You and your partner win the game by revealing certain patterns of safe tiles on the board.
	  However, if a bomb is accidentally revealed, you explode and lose the round.
	</p>

	<p>
	  What makes the game fun is that each of you have secret information.
	  You will need to communicate to win!
	</p>

	<p>
	  One of you (the "leader") is told what pattern of tiles you need to reveal.
	  Sometimes you will need to complete one of the <i>columns</i>.
	</p>

	<p>
	  <center>
	    <img src="images/completeanycolumn.png" alt="Example objects"
		 style="width:300px; height:311px">
	  </center>
	</p>

	<p>
	  Other times you must complete one of the <i>rows</i>.
	</p>
	
	<p>
	  <center>
	    <img src="images/completeanyrow.png" alt="Example objects"
		 style="width:300px; height:323px">
	  </center>
	</p>

	<p>
	  While the leader know the goal, they don't know where the bombs are!
	  Thankfully, the other player (the "helper") is given a secret map.
	</p>

	<p>
	  <center>
	    <img src="images/bombMap.png" alt="Example objects"
		 style="width:300px; height:332px">
	  </center>
	</p>

	<p>
	  To communicate, the leader must ask a question and the helper must respond to that question.
	  Specifically, the leader selects a cell to ask about (e.g. "Is A3 safe?") from a dropdown menu.
	</p>
	
	<p>
	  <center>
	    <img src="images/fullQuestionerViewCols.png" alt="Example objects"
		 style="width:200px; height:92px">
	  </center>
	</p>
	
	<p>
	  The helper will then answer a question about what they think the goal is:
	</p>

	<p>
	  <center>
	    <img src="images/goalanswer.png" alt="Example objects"
		 style="width:300px; height:170px">
	  </center>
	</p>

	<p>
	  And then respond to the question with a yes/no, as well as
	  optionally provide info about an additional tile (e.g. "yes,
	  it is safe but A2 is not.")
	</p>

	<p>
	  <center>
	    <img src="images/moreInfo.png" alt="reveal"
		 style="width:300px; height:178px">
	  </center>
	</p>
	
	<p>
	  The reason the helper may want to provide additional information is to help win the round in fewer questions!
	  For every additional question the leader asks, your bonus will go down.
	  If you successfully complete your goal after asking a single question, you will both get a <b>bonus of $0.03 per round</b>.
	  If it is still not completed after the first question, you will only receive <b>$0.02</b>, and so on.
	  So pay attention to your choices!
	</p>
	
	<p>
	  There are a total of <b>20 rounds</b>. After the final round
	  you will answer a few more questions and be on your way.
	</p>
	
	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page), or tab away
	  from the page once a partner joins. You not be able to
	  rejoin the game you were in and you may not be able to
	  submit the HIT. <br> Thank you!
	</p>

	<h3>
	  Please fill out this short quiz below before getting
	  started. Be confident you understand the instructions before
	  submitting the quiz -- if you answer incorrectly, you will
	  not be able to proceed to the game.  Good luck, and have
	  fun!
	</h3>
	
      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">
	
	<br>
	The point of the game is to lie and make your partner explode.
	<br>
	<input type="radio" name="dgoal" value="no"> True
	<br>
	<input type="radio" name="dgoal" value="yes"> False
	<br>

	<br>
	The Helper is trying to help the Leader complete their goal in as few questions as possible.
	<br>
	<input type="radio" name="mgoal" value="yes"> True
	<br>
	<input type="radio" name="mgoal" value="no"> False
	<br>

	<br>
	The Leader's secret goal is either to find a safe <i>column</i> or a safe <i>row</i>.
	<br>
	<input type="radio" name="message" value="yes"> True
	<br>
	<input type="radio" name="message" value="no"> False
	<br>

	<br>
	The Helper may provide additional information beyond their yes/no answer.
	<br>
	<input type="radio" name="location" value="yes"> True
	<br>
	<input type="radio" name="location" value="no"> False
	<br>

	<!-- <br> -->
	<!-- Imagine the following round: you are the Helper and there is -->
	<!-- only <b>one</b> possible combo. What would you need to do to -->
	<!-- get a bonus? -->
	<!-- <p> -->
	<!--   <center> -->
	<!--     <img src="images/singleCombo.png" alt="single possible combo" -->
	<!-- 	 style="width:500px;height:323px"> -->
	<!--   </center> -->
	<!-- </p>	 -->
	<!-- <br> -->
	<!-- <input type="radio" name="comp" value="no"> Only reveal the six of diamonds (the first card). -->
	<!-- <br> -->
	<!-- <input type="radio" name="comp" value="yes"> Reveal <b>both</b> the six of diamonds and three of clubs. -->
	<!-- <br> -->
	<!-- <input type="radio" name="comp" value="no"> Reveal the nine of spades. -->
	<!-- <br> -->

	<br>
	It is possible to do this HIT more than once.
        <br>
        <input type="radio" name="completed" value="no"> True
        <br>
        <input type="radio" name="completed" value="yes"> False
        <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. Try again. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = "yes";//$('input[name="comp"]:checked').val();
        var ans5 = $('input[name="location"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" && 
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") { 
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo
			    + "&counter=" + counter);
        } else if(counter == 2) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/lib/js/bootstrap.min.js"></script>
  </body>
</html>
